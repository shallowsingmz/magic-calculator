
### 1. 项目目标
开发一个网页版计算器，外观模仿**小米手机计算器**，核心功能是内置一套特定的“魔术逻辑”，在特定操作序列后显示预设的“魔术数字”。

### 2. 界面要求 (UI)
*   **风格**：视觉设计需与小米手机自带计算器保持一致。
*   **布局**：包含标准的数字键、运算符键、等号键、回退键、清屏键（AC/C）及输出显示区。

### 3. 核心交互逻辑流程 (State Machine)
整个计算器的运行分为四个阶段，状态流转如下：

*   **阶段一：正常计算模式 (初始状态)**
    *   **行为**：所有计算器功能（加减乘除、显示等）完全正常。
    *   **触发条件**：用户**第一次**点击 `=` (等号) 键。
    *   **结果**：显示计算结果，进入“阶段二”。

*   **阶段二：魔术设定模式**
    *   **触发条件**：在阶段一之后，用户**第一次**点击 `清屏键`。
    *   **行为**：
        1.  界面正常清屏（用户可见）。
        2.  **后台计算**：获取当前系统日期和时间，组合成一个 7 位数（格式示例：2 月 16 日 22:40 → `2162240`）。
        3.  **生成差值**：用上述 7 位数 减去 **阶段一得到的计算结果**。
        4.  **存储**：记住这个“差值”，但**不显示**在屏幕上。
    *   **结果**：进入“阶段三”。

*   **阶段三：魔术展示模式**
    *   **触发条件**：用户点击网页上的**任意位置**（`清屏键` 除外）。
    *   **行为**：
        1.  在输出区显示“差值”的**下一位数字**（顺序：从最高位到最低位）。
        2.  每次点击显示一位，直到所有位数显示完毕。
    *   **结束状态**：当差值的所有位数都显示完毕后，进入“阶段四”。

*   **阶段四：锁定与重置模式**
    *   **状态 A (锁定)**：
        *   **触发**：点击网页任意位置（`清屏键` 除外）。
        *   **行为**：输出区**无任何反应**。
    *   **状态 B (重置)**：
        *   **触发**：点击 `清屏键`。
        *   **行为**：清空输出区，所有内部状态复位。
        *   **结果**：返回“阶段一”，计算器恢复正常使用。

### 4. 关键技术细节与潜在逻辑确认
*   **魔术数字生成规则**：需明确日期时间的拼接格式（例如：月份不要补0，目前不用考虑10月11月12月的情况，示例中 2 月为 `2` 而非 `02`，需严格遵循示例逻辑以确保为 7 位数）。
*   **差值处理**：暂时不用考虑“日期时间数”小于“计算结果”时差值为负数的情况。
*   **事件监听**：需区分“清屏键点击”与“页面其他区域点击”，防止事件冒泡导致逻辑冲突。
*   **技术栈**：首选 `HTML + CSS + JavaScript` 实现。
